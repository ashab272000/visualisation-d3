<!DOCTYPE html>
<html lang="en">

<head>
    <script src='https://d3js.org/d3.v7.min.js'></script>
</head>

<body>
    <h3>exercise1 & 2</h3>
    <p>First paragraph</p>
    <p>Second paragraph</p>
    <div id='exercise1'></div>
    <div id='exercise2'></div>
    <div id='exercise3'></div>
    <div id='exercise4'></div>
    <div id='exercise5'></div>
    <div id='exercise6'></div>
    <div id='exercise7'></div>
    <div id='exercise8'></div>
    <div id='exercise9'></div>
    <div id='exercise10'></div>
    <div id='exercise11'></div>
    <div id='exercise12'></div>
    <div id='exercise13'></div>
    <div id='exercise14'></div>
    <div id='exercise15'></div>
    <div id='exercise16'></div>
    <div id='exercise17'></div>
    <div id='exercise18'></div>
    <div id='exercise19'></div>
    <div id='exercise20'></div>
    <div id='exercise21'></div>
    <div id='exercise22'></div>
    <div id='exercise23'></div>
    <div id='exercise24'></div>
    <div id='exercise25'></div>
    <div id='exercise26'></div>
    <div id='exercise27'></div>
    <div id='exercise28'></div>
    <div id='exercise29'></div>
    <div id='exercise30'></div>
    <div id='exercise31'></div>
    <div id='exercise32'></div>
    <!-- Functions to be used -->
    <script>
        // Constants
        const heartfailurecsv = 'https://raw.githubusercontent.com/akmand/datasets/master/heart_failure.csv';

        // Add Exercise Div
        const addExerciseDiv = ({ exerciseNumber, flex = false }) => {
            let div = d3
                .select(`#exercise${exerciseNumber}`)

            div
                .append('h3')
                .text(`Exercise ${exerciseNumber}`)
            const exerciseDiv = div.append('div').style('display', flex ? 'flex' : 'block')
            return exerciseDiv
        }
        // Gets the data from Csv
        const getCsv = async (csvUrl) => {
            let data = []
            await d3.csv(csvUrl, (d) => {
                data.push(d);
            })
            return data
        }

        // Gets count from csv
        const getCountFromCSV = (data, condition) => {
            let count = 0;
            data.forEach((row) => {
                count += (condition(row) ? 1 : 0)
            })
            // count += condition(data[data.length - 1]) ? 1 : 0

            return count
        }

        const getArrayFromCsv = (csvData, key, parseDataFunc) => {

            let data = []
            csvData.forEach((d) => {

                data.push(parseDataFunc(d[key]))
            })

            return data
        }

    </script>

    <!--  -->
    <!--  -->
    <!-- Exercises Defined as function, and will be called inside a async FunctionIFF -->
    <script>




    </script>

    <script>
        // write your d3 code here.. 
        console.log('d3.version:', d3.version);

        // ------------------------ Exercise 1 ------------------------
        // Answer: Version = 7.3.0

    </script>
    <!-- ------------------------ Exercise 3 ------------------------ -->
    <script>
        (async () => {

            // ------------------------------------------ Exercise 2 ------------------------------------------
            const exercise2 = () => {
                d3
                    .select("p")
                    .style("color", "red")
                    .style("font-size", "32px")
                    .style("line-height", "20px")
                    .text("The paragraph below is a liar")
                    .style('font-family', "cursive")
            }

            // ------------------------------------------ Exercise 3 ------------------------------------------

            const exercise3 = () => {

                const div = addExerciseDiv({ exerciseNumber: 3, flex: true })

                for (let i = 0; i < 10; i++) {

                    div.append('div')
                        .style('width', '30px')
                        .style('height', '30px')
                        .style('margin', '2px')
                        .style('background', () => i > 4 ? 'green' : 'red')
                        .style('text-align', 'center')
                        .text(i + 1)

                }

            }

            // ------------------------------------------ Exercise 4 ------------------------------------------

            const exercise4 = () => {

                const div = addExerciseDiv({ exerciseNumber: 4, flex: true })

                for (let i = 0; i < 10; i++) {

                    div
                        .append('div')
                        .style('width', '30px')
                        .style('height', '30px')
                        .style('margin', '2px')
                        .style('background', () => i > 4 ? 'green' : 'red')
                        .style('text-align', 'center')
                        .attr('id', `exercise4-div-${i}`)
                        .text(i + 1)

                }

                d3
                    .select('#exercise4-div-0')
                    .style('background', 'purple')
                    .text('start')

                d3
                    .select('#exercise4-div-1')
                    .style('width', '70px')
                d3
                    .select('#exercise4-div-2')
                    .style('border-radius', '50px')
                d3
                    .select('#exercise4-div-3')
                    .style('border', '2px solid black')

            }

            // ------------------------------------------ Exercise 5 ------------------------------------------

            const exercise5 = () => {

                const div = addExerciseDiv({ exerciseNumber: 5 })

                div
                    .text("Hello World!")
                    .style('color', 'green')
                    .style('font-weight', 'bold');

            }

            // ------------------------------------------ Exercise 6 ------------------------------------------

            const exercise6 = () => {

                let otherdata = [{ name: 'test', val: 1 },
                { name: 'other', val: 2 },
                { name: 'b', val: 3 },
                { name: 'color', val: 4 }];

                const div = addExerciseDiv({ exerciseNumber: 6 })

                for (let i = 0; i < otherdata.length; i++) {
                    div
                        .append('div')
                }

                div
                    .selectAll("div")
                    .data(otherdata)
                    .text(function (d, i) {
                        console.log("d.name: " + d.name);
                        console.log("d.val: " + d.val);
                        console.log("i: " + i);
                        console.log("this: " + this);
                        return 'cont:' + d.name; // return value is used to set the 'text'
                    });


            }
            // ------------------------------------------ Exercise 7 ------------------------------------------

            const exercise7 = () => {


                let num = [10, 50, 100, 200];

                const div = addExerciseDiv({ exerciseNumber: 7 })

                // Adding 4 divs
                for (let i = 0; i < num.length; i++) {
                    div
                        .append('div')
                }

                div
                    .selectAll("div")
                    .data(num)
                    .text(function (d, i) {
                        return 'cont:' + d; // return value is used to set the 'text'
                    })
                    .style("color", function (d, i) {
                        if (d > 49 && d < 101) {
                            return "red";
                        } else {
                            return "yellow";
                        }
                        return 'blue';
                    });


            }

            // ------------------------------------------ Exercise 8 ------------------------------------------

            const exercise8 = () => {

                const div = addExerciseDiv({ exerciseNumber: 8 })

                const data = ['a', 4, 1, 'b', 6, 2, 8, 9, 'z'];

                // Adds a div with an Id excercise8 
                // Adds span inside #exercise8
                div
                    .selectAll("span")
                    .data(data)
                    .enter()
                    .append('span')
                    .style('color', (d) => typeof (d) == 'number' ? 'green' : 'blue')
                    .style('font-weight', (d) => typeof (d) == 'number' ? 'bold' : 'regular')
                    .text(function (d, i) {
                        return d;
                    });


            }

            // ------------------------------------------ Exercise 9 ------------------------------------------

            const exercise9 = async () => {

                const div = addExerciseDiv({ exerciseNumber: 9, flex: true })

                const data = await getCsv('https://raw.githubusercontent.com/dsindy/kaggle-titanic/master/data/test.csv')

                const countData = {}

                countData['Male'] = getCountFromCSV(data, (row) => row['Sex'] == 'male')
                countData['Female'] = getCountFromCSV(data, (row) => row['Sex'] == 'female')
                countData['Mr'] = getCountFromCSV(data, (row) => row['Name'].match('Mr.') != null)
                countData['Mrs'] = getCountFromCSV(data, (row) => row['Name'].match('Mrs.') != null)

                let valueDivs = div
                    .selectAll('div')
                    .data(Object.entries(countData))
                    .enter()
                    .append('div')
                    .style('text-align', 'center')
                    .style('margin', '10px')

                valueDivs
                    .append('h4')
                    .text((d) => d[0])

                valueDivs
                    .append('p')
                    .text((d) => d[1])
            }

            const exercise10 = async () => {
                /*
                age,anaemia,creatinine_phosphokinase,diabetes,ejection_fraction,high_blood_pressure,platelets,serum_creatini
                ne,serum_sodium,sex,smoking,time,DEATH_EVENT
                75,0,582,0,20,1,265000,1.9,130,1,0,4,1
                55,0,7861,0,38,0,263358.03,1.1,136,1,0,6,1
                65,0,146,0,20,0,162000,1.3,129,1,1,7,1
                50,1,111,0,20,0,210000,1.9,137,1,0,7,1
                */
                let countData = {
                    '1-30': 0,
                    '31-40': 0,
                    '41-60': 0,
                    '61-100': 0,
                }

                d3.csv(heartfailurecsv, function (data) {
                    //console.log( data.age);
                    // todo
                    if (data.age < 31) {
                        countData['1-30']++
                    }
                    else if (data.age < 41) {
                        countData['31-40']++
                    }
                    else if (data.age < 61) {
                        countData['41-60']++
                    }
                    else if (data.age < 101) {
                        countData['61-100']++
                    }
                }).then(() => {

                    const mainDiv = addExerciseDiv({ exerciseNumber: 10, flex: true })

                    const divs = mainDiv
                        .selectAll('div')
                        .data(Object.entries(countData))
                        .enter()
                        .append('div')
                        .style('text-align', 'center')
                        .style('margin', '10px')

                    divs
                        .append('h4')
                        .text(d => d[0])
                    divs
                        .append('p')
                        .text(d => d[1])

                })

            }

            const exercise11 = () => {

                const mainDiv = addExerciseDiv({ exerciseNumber: 11 })

                const svg = mainDiv
                    .append("svg")
                    .attr("width", 400)
                    .attr("height", 400)
                    .style("border", '1px solid green');

                //Create line element inside SVG
                svg.append("line")
                    .attr("x1", 95)
                    .attr("x2", 205)
                    .attr("y1", 95)
                    .attr("y2", 95)
                    .attr("stroke", "blue")
                    .attr("stroke-width", '10px')

                svg.append("line")
                    .attr("x1", 200)
                    .attr("x2", 200)
                    .attr("y1", 100)
                    .attr("y2", 200)
                    .attr("stroke", "pink")
                    .attr("stroke-width", '10px')

                svg.append("line")
                    .attr("x1", 205)
                    .attr("x2", 95)
                    .attr("y1", 205)
                    .attr("y2", 205)
                    .attr("stroke", "purple")
                    .attr("stroke-width", '10px')

                svg.append("line")
                    .attr("x1", 100)
                    .attr("x2", 100)
                    .attr("y1", 200)
                    .attr("y2", 100)
                    .attr("stroke", "orange")
                    .attr("stroke-width", '10px')

            }

            const exercise14 = () => {

                let countData = {
                    '1-30': 0,
                    '31-40': 0,
                    '41-60': 0,
                    '61-100': 0,
                }

                d3.csv(heartfailurecsv, function (data) {
                    //console.log( data.age);
                    // todo
                    if (data.age < 31) {
                        countData['1-30']++
                    }
                    else if (data.age < 41) {
                        countData['31-40']++
                    }
                    else if (data.age < 61) {
                        countData['41-60']++
                    }
                    else if (data.age < 101) {
                        countData['61-100']++
                    }
                }).then(() => {


                    const mainDiv = addExerciseDiv({ exerciseNumber: 14 })
                    // Updating the text of h3
                    d3.select('#exercise14').select('h3').text('Exercise 14 & 15')

                    const data = Object.entries(countData);
                    // console.log("Data")
                    // console.log(data)

                    const width = 500;
                    const scaleFactor = 2;
                    const barHeight = 20;

                    const graph = mainDiv
                        .append("svg")
                        .attr("width", width)
                        .attr("height", barHeight * data.length);

                    const bar = graph.selectAll("g")
                        .data(data)
                        .enter()
                        .append("g")
                        .attr("transform", function (d, i) {
                            return "translate(0," + i * barHeight + ")";
                        });

                    bar.append("rect")
                        .attr("width", function (d) {
                            return d[1] * scaleFactor;
                        })
                        .attr("height", barHeight - 1)
                        .attr("x", 100)
                        .style('fill', (d) => d[1] > 100 ? "red" : "blue");

                    // Title
                    bar.append("text")
                        .attr("x", 50)
                        .attr("y", barHeight / 2)
                        .attr("dy", ".35em")
                        .style('fill', 'black')
                        .style('font-size', '16px')
                        .text((d) => d[0]);
                    // Amount
                    bar.append("text")
                        .attr("x", function (d) { return (d[1] * scaleFactor) + 100; })
                        .attr("y", barHeight / 2)
                        .attr("dy", ".35em")
                        .style('fill', 'black')
                        .style('font-size', '16px')
                        .text((d) => d[1]);


                })
            }

            const exercise16 = async () => {
                const width = 600;
                const height = 200;
                const data = [10, 15, 20, 25, 30];
                // Note different valid ways of specifying color
                const colors = ['#ffffcc', 'red', 'rgb(0,255,0)', '#31a354', '#006837'];

                const mainDiv = addExerciseDiv({ exerciseNumber: 16 })
                d3.select('#exercise16').append('h4').text('Odd Number = Square, Even Number = Circle')

                const svg = mainDiv
                    .append("svg")
                    .attr("width", width)
                    .attr("height", height);
                const g = svg.selectAll("g")
                    .data(data)
                    .enter()
                    .append("g")
                    .attr("transform", function (d, i) {
                        return "translate(0,0)";
                    })

                // console.log("Gada")
                // console.log(g)

                // if even then draw circle
                g.each(((d, i) => {
                    // console.log(d)

                    if (d % 2 == 0) {
                        // console.log(true)
                        g.append("circle")
                            .attr("cx", function () {
                                return i * 100 + 50 + (d * 1.5);
                            })
                            .attr("cy", function () {
                                return 100;
                            })
                            .attr("r", function () {
                                return d * 1.5;
                            })
                            .attr("fill", function () {
                                return colors[i];
                            })
                        return
                    } else {
                        // console.log(false)
                        g.append("rect")
                            .attr("x", function () {
                                return i * 100 + 50;
                            })
                            .attr("y", function () {
                                return 100 - (d * 0.7);
                            })
                            .attr("width", function () {
                                return d * 1.5;
                            })
                            .attr("height", function () {
                                return d * 1.5;
                            })
                            .attr("fill", function () {
                                return colors[i];
                            });
                    }
                }))
                g.append("text")
                    .attr("x", function (d, i) {
                        return i * 100 + 40;
                    })
                    .attr("y", 105)
                    .attr("stroke", "teal")
                    .attr("font-size", "12px")
                    .attr("font-family", "sans-serif")
                    .text(function (d) {
                        return d;
                    });

            }

            const exercise17 = () => {
                const data = [50, 400, 300, 900, 250, 1000]
                const width = 500;
                const barHeight = 20;
                const margin = 1;

                const mainDiv = addExerciseDiv({ exerciseNumber: 17 })

                const scale = d3.scaleLinear()
                    .domain([d3.min(data), d3.max(data)])
                    .range([50, 500]);
                const svg = mainDiv
                    .append("svg")
                    .attr("width", width)
                    .attr("height", barHeight * data.length);
                const g = svg.selectAll("g")
                    .data(data)
                    .enter()
                    .append("g")
                    .attr("transform", function (d, i) {
                        return "translate(0," + i * barHeight + ")";
                    });
                g.append("rect")
                    .attr("width", function (d) {
                        return scale(d);
                    })
                    .style('fill', (d) => {
                        // console.log(d)
                        if (d < 100) {
                            return 'green'
                        } else if (d > 500) {
                            return 'red'
                        }

                        return 'blue'

                    })
                    .attr("height", barHeight - margin)
                g.append("text")
                    .attr("x", function (d) { return (scale(d)); })
                    .attr("y", barHeight / 2)
                    .attr("dy", ".35em")
                    .style('text-anchor', 'end')
                    .text(function (d) { return d; });
            }

            const exercise18 = async () => {
                let csvData = await getCsv('./csv/18.csv')
                let data = []
                csvData.forEach((d) => {
                    data.push(parseInt(d['Values']))
                })

                const mainDiv = addExerciseDiv({ exerciseNumber: 18 })

                const width = 500;
                const barHeight = 20;
                const margin = 1;
                const scale = d3.scaleLinear()
                    .domain([d3.min(data), d3.max(data)])
                    .range([50, 500]);
                const svg = mainDiv
                    .append("svg")
                    .attr("width", width)
                    .attr("height", barHeight * data.length);
                const g = svg.selectAll("g")
                    .data(data)
                    .enter()
                    .append("g")
                    .attr("transform", function (d, i) {
                        return "translate(0," + i * barHeight + ")";
                    });
                g.append("rect")
                    .attr("width", function (d) {
                        return scale(d);
                    })
                    .style('fill', (d) => {
                        // console.log(d)
                        if (parseInt(d) < 100) {
                            return 'green'
                        } else if (parseInt(d) > 500) {
                            return 'red'
                        }

                        return 'blue'

                    })
                    .attr("height", barHeight - margin)
                g.append("text")
                    .attr("x", function (d) { return (scale(parseInt(d))); })
                    .attr("y", barHeight / 2)
                    .attr("dy", ".35em")
                    .style('text-anchor', 'end')
                    .text(function (d) { return d; });
            }

            const barchartData = async ({ data, element, width = 500, barHeight = 20, range = [50, 500], x = 0, svg = null, fillColor }) => {

                const mainDiv = element;

                const margin = 1;
                const scale = d3.scaleLinear()
                    .domain([d3.min(data), d3.max(data)])
                    .range(range);
                if (svg == null) {
                    svg = mainDiv
                        .append("svg")
                        .attr("width", width)
                        .attr("height", barHeight * data.length);
                }
                const g = svg.selectAll("g")
                    .data(data)
                    .enter()
                    .append("g")
                    .attr("transform", function (d, i) {
                        return "translate(" + x + "," + i * barHeight + ")";
                    });
                g.append("rect")
                    .attr("width", function (d) {
                        return scale(d);
                    })
                    .style('fill', (d) => {
                        if (fillColor) {
                            return fillColor(d)

                        }
                        // console.log(d)
                        if (parseInt(d) < 100) {
                            return 'green'
                        } else if (parseInt(d) > 500) {
                            return 'red'
                        }

                        return 'blue'

                    })
                    .attr("height", barHeight - margin)
                g.append("text")
                    .attr("x", function (d) { return (scale(parseInt(d))); })
                    .attr("y", barHeight / 2)
                    .attr("dy", ".35em")
                    .style('text-anchor', 'end')
                    .text(function (d) { return d; });

                return svg

            }

            const barchartCsv = async ({ csvLink, key, element, width = 500, barHeight = 20, range = [50, 500], svg = null }) => {
                let csvData = await getCsv(csvLink)
                let data = []
                csvData.forEach((d) => {
                    data.push(parseInt(d[key]))
                })

                return barchartData({ data, element, width, barHeight, range, svg })
            }

            const exercise19 = async () => {

                const mainDiv = addExerciseDiv({ exerciseNumber: 19 })
                mainDiv.append('h4').text("Chart 1")
                await barchartCsv({ csvLink: './csv/19-1.csv', key: 'Value', element: mainDiv })
                mainDiv.append('h4').text("Chart 2")
                await barchartCsv({ csvLink: './csv/19-2.csv', key: 'Random', element: mainDiv })
                // await barchartCsv
            }

            const exercise20 = () => {

                const width = 400;
                const height = 300;
                const data = [10, 15, 20, 25, 30];
                const mainDiv = addExerciseDiv({ exerciseNumber: 20 })

                const svg = mainDiv
                    .append("svg")
                    .attr("width", width)
                    .attr("height", height);

                const xscale = d3.scaleLinear()
                    .domain([0, d3.max(data)])
                    .range([0, width - 100]);

                const yscale = d3.scaleLinear()
                    .domain([0, d3.max(data)])
                    .range([height / 2, 0]);

                const x_axis_bottom = d3.axisBottom()
                    .scale(xscale);

                const x_axis_top = d3.axisTop()
                    .scale(xscale);

                const y_axis_left = d3.axisLeft()
                    .scale(yscale);

                const y_axis_right = d3.axisRight()
                    .scale(yscale);

                svg.append("g")
                    .attr("transform", "translate(50, 30)")
                    .style('stroke', 'black')
                    .call(y_axis_left);

                const axisRight = svg.append("g")
                    .attr("transform", `translate(${50 + width - 100}, 30)`)
                    .style('stroke', 'blue')
                    .call(y_axis_right)

                axisRight.selectAll('text')
                    .attr('x', 20)

                axisRight.selectAll('line')
                    .style('stroke', 'blue')

                axisRight.select('path')
                    .style('stroke', 'blue')


                const bottomTranslate = height / 2 + 30;
                svg.append("g")
                    .attr("transform", "translate(50, " + bottomTranslate + ")")
                    .style('stroke', 'black')
                    .call(x_axis_bottom);

                const topTranslate = 30;
                const axisTop = svg.append("g")
                    .attr("transform", "translate(50, " + topTranslate + ")")
                    .style('stroke', 'blue')
                    .call(x_axis_top)

                axisTop.selectAll('line')
                    .style('stroke', 'blue')
                axisTop.selectAll('path')
                    .style('stroke', 'blue')
            }

            const exercise21 = async () => {
                const mainDiv = addExerciseDiv({ exerciseNumber: 21 })

                let csvData = await getCsv('./csv/19-1.csv')
                let data = []
                csvData.forEach((d) => {
                    data.push(parseInt(d['Value']))
                })

                let width = 500;
                let barHeight = 20;
                let height = 20 * data.length
                let viewHeight = height + 50



                const svg = await barchartData({ data, element: mainDiv, width, range: [0, width], barHeight, x: 20 })
                svg
                    .attr("height", height + 50)
                svg
                    .attr("width", width + 20)

                const xscale = d3.scaleLinear()
                    .domain([d3.min(data), d3.max(data)])
                    .range([0, width]);

                const yscale = d3.scaleLinear()
                    .domain([0, data.length])
                    .range([height, 0]);

                const x_axis_bottom = d3.axisBottom()
                    .scale(xscale);

                const y_axis_left = d3.axisLeft()
                    .scale(yscale);

                svg.append("g")
                    .attr("transform", `translate(20,${height})`)
                    .style('stroke', 'black')
                    .call(x_axis_bottom);


                svg.append("g")
                    .attr("transform", "translate(20, 0)")
                    .style('stroke', 'black')
                    .call(y_axis_left);


            }

            const plotGraph = ({ xSize = 600, ySize = 600, margin = 40, data, parent, svg = null, marker = null, color = null }) => {
                const xMax = xSize - margin * 2;
                const yMax = ySize - margin * 2;
                // Get the 'limits' of the data - the full extent (mins and max)
                // so the plotted data fits perfectly 
                const xExtent = d3.extent(data, d => { return d.x });
                const yExtent = d3.extent(data, d => { return d.y });
                // Append SVG Object to the Page
                if (svg == null) {
                    svg = parent
                        .append("svg")
                        .attr('width', xSize)
                        .attr('height', ySize)
                        .append("g")
                        .attr("transform", `translate(${margin}, ${margin})`);
                }
                // X Axis
                const x = d3.scaleLinear()
                    .domain([xExtent[0], xExtent[1]])
                    .range([0, xMax]);
                // bottom
                svg.append("g")
                    .attr("transform", `translate(0, ${yMax})`)
                    .call(d3.axisBottom(x))
                    .attr('color', 'green'); // make bottom axis green
                // top
                svg.append("g")
                    .call(d3.axisTop(x));
                // Y Axis
                const y = d3.scaleLinear()
                    .domain([yExtent[0], yExtent[1]])
                    .range([yMax, 0]);
                // left y axis
                svg.append("g")
                    .call(d3.axisLeft(y));
                // right y axis
                svg.append("g")
                    .attr("transform", `translate(${yMax},0)`)
                    .call(d3.axisRight(y));
                // Add the line
                if (color != null) {

                    let id = (Math.random() + 1).toString(36).substring(2);
                    svg.append("linearGradient")
                        .attr('id', id)
                        .attr("gradientUnits", "userSpaceOnUse")
                        // .attr("gradientTransform", "rotate(90)")
                        .attr("x1", 0)
                        .attr("x2", 0)
                        .attr("y1", y(0))
                        .attr("y2", ySize)
                        .selectAll("stop")
                        .data([...Array(100).keys()])
                        .enter()
                        .append("stop")
                        .attr("offset", d => d + '%')
                        .attr("stop-color", d => color(d));

                    svg.append("path")
                        .datum(data)
                        .attr("fill", "none")
                        .attr("stroke", `url(#${id})`)
                        .attr("stroke-width", 1.5)
                        .attr("d", d3.line()
                            .x(function (d) { return x(d.x) })
                            .y(function (d) { return y(d.y) })
                        );
                } else {
                    svg.append("path")
                        .datum(data)
                        .attr("fill", "none")
                        .attr("stroke", "steelblue")
                        .attr("stroke-width", 1.5)
                        .attr("d", d3.line()
                            .x(function (d) { return x(d.x) })
                            .y(function (d) { return y(d.y) })
                        );
                }


                if (marker != null) {

                    svg.selectAll("dot")
                        .data(data)
                        .enter()
                        .append('path')
                        .attr('d', marker)
                        .attr('transform', (d) => `translate(${x(d.x)}, ${y(d.y)})`)
                        .style('fill', 'red')

                }

                return [svg, x, y];
            }

            const exercise22 = () => {

                const mainDiv = addExerciseDiv({ exerciseNumber: 22 });

                // Create Random Points
                const numPoints = 100;
                const data = [];
                for (let i = 0; i < numPoints; i++) { data.push({ x: i / 100, y: Math.cos(6.2 * i / 100) }); }

                plotGraph({ data, parent: mainDiv })
            }

            const exercise23 = async () => {

                const mainDiv = addExerciseDiv({ exerciseNumber: 23 });

                const csvData = await getCsv(heartfailurecsv)
                const dataX = await getArrayFromCsv(csvData, 'age', parseInt)
                const dataY = await getArrayFromCsv(csvData, 'serum_sodium', parseInt)
                const data = []
                for (let i = 0; i < dataX.length; i++) {
                    data.push({ x: dataX[i], y: dataY[i] })
                }


                plotGraph({ data, parent: mainDiv })
            }

            const exercise24 = async () => {

                const mainDiv = addExerciseDiv({ exerciseNumber: 24 });

                const numPoints = 100;
                const dataCos = [];
                for (let i = 0; i < numPoints; i++) { dataCos.push({ x: i / 100, y: Math.cos(6.2 * i / 100) }); }
                const dataSin = [];
                for (let i = 0; i < numPoints; i++) { dataSin.push({ x: i / 100, y: Math.sin(6.2 * i / 100) }); }


                const svg = plotGraph({ data: dataCos, parent: mainDiv })[0]
                plotGraph({ data: dataSin, svg })
            }

            const exercise25 = () => {

                const mainDiv = addExerciseDiv({ exerciseNumber: 25 });

                const numPoints = 100;
                const dataCos = [];
                for (let i = 0; i < numPoints; i++) { dataCos.push({ x: i / 100, y: Math.cos(6.2 * i / 100) }); }
                // const dataSin = [];
                // for (let i = 0; i < numPoints; i++) { dataSin.push({ x: i / 100, y: Math.sin(6.2 * i / 100) }); }


                plotGraph({ data: dataCos, parent: mainDiv, marker: d3.symbol().size(10) })
                // plotGraph({ data: dataSin, svg })

            }

            const exercise26 = () => {

                const mainDiv = addExerciseDiv({ exerciseNumber: 26 });

                const numPoints = 100;
                const dataCos = [];
                for (let i = 0; i < numPoints; i++) { dataCos.push({ x: i / 100, y: Math.cos(6.2 * i / 100) }); }
                const dataSin = [];
                for (let i = 0; i < numPoints; i++) { dataSin.push({ x: i / 100, y: Math.sin(6.2 * i / 100) }); }



                const svg = plotGraph({ data: dataCos, parent: mainDiv, marker: d3.symbol().size(10) })[0]

                plotGraph({ data: dataSin, svg, marker: d3.symbol(d3.symbolTriangle, 20) })
            }

            const exercise27 = () => {

                const mainDiv = addExerciseDiv({ exerciseNumber: 27 });

                const numPoints = 100;
                const dataCos = [];
                for (let i = 0; i < numPoints; i++) { dataCos.push({ x: i / 100, y: Math.cos(6.2 * i / 100) }); }
                const dataSin = [];
                for (let i = 0; i < numPoints; i++) { dataSin.push({ x: i / 100, y: Math.sin(6.2 * i / 100) }); }


                let graph = plotGraph({ data: dataCos, parent: mainDiv, marker: d3.symbol().size(10), includeText: true })
                let svg = graph[0]
                let x = graph[1]
                let y = graph[2]
                console.log(svg)

                svg.append('g')
                    .selectAll('text')
                    .data([12, 24, 35, 50, 65, 76, 88].map((i) => dataCos[i]))
                    // .data(dataCos)
                    .enter()
                    .append('text')
                    .text((d, i) => { console.log(i); return `(${d.x.toFixed(2)}, ${d.y.toFixed(2)})` })
                    // .attr('transform', (d) => `translate(${x(d.x)}, ${y(d.y)})`)
                    .attr('transform', (d) => `translate(${x(d.x) - 10}, ${y(d.y)})`)
                    .attr('id', (d, i) => `gada${i}`)
                    .attr('fill', 'black')
                    .style('fill', 'black')

                // plotGraph({ data: dataSin, svg, marker: d3.symbol(d3.symbolTriangle, 20) })

            }

            const exercise28 = async () => {

                const mainDiv = addExerciseDiv({ exerciseNumber: 28 })
                const csvData = await getCsv('./csv/19-1.csv')
                const data = getArrayFromCsv(csvData, 'Value', parseInt)
                const myColor = d3.scaleSequential().domain([0, 800]).interpolator(d3.interpolateViridis);

                barchartData({ data, element: mainDiv, fillColor: (value) => myColor(value) })

            }

            const exercise29 = async () => {

                const mainDiv = addExerciseDiv({ exerciseNumber: 29 })
                const data = [];
                const numPoints = 100
                for (let i = 0; i < numPoints; i++) { data.push({ x: i / 100, y: Math.cos(6.2 * i / 100) }); }
                const myColor = d3.scaleSequential().domain([0, 100]).interpolator(d3.interpolateViridis);

                plotGraph({ data, parent: mainDiv, color: myColor })

            }



            exercise2()
            exercise3()
            exercise4()
            exercise5()
            exercise6()
            exercise7()
            exercise8()
            exercise9()
            exercise10()
            exercise11()
            exercise14()
            exercise16()
            exercise17()
            exercise18()
            exercise19()
            exercise20()
            exercise21()
            exercise22()
            exercise23()
            exercise24()
            exercise25()
            exercise26()
            exercise27()
            exercise28()
            exercise29()
        })()

    </script>

    <!-- ------------------------ Exercise 14 and 15 ------------------------ -->
    <style>
        svg rect {
            fill: blue;
        }

        svg text {
            fill: white;
            font: 10px sans-serif;
            text-anchor: end;
        }
    </style>

</body>

</html>